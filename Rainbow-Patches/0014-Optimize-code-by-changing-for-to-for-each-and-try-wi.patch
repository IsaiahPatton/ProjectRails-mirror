From 6e18a045d68edffdba01c1c019b7a16c62109327 Mon Sep 17 00:00:00 2001
From: IsaiahPatton <isaiahpatton1@gmail.com>
Date: Thu, 29 Jun 2017 11:24:47 -0400
Subject: [PATCH] Optimize code by changing for to for-each and
 try-with-resouce

---
 .../src/main/java/PluginReference/RainbowUtils.java            |  5 ++---
 rainbow/src/main/java/org/projectrainbow/_Janitor.java         | 10 ++++------
 rainbow/src/main/java/org/projectrainbow/_JoeCommandStats.java |  4 ++--
 rainbow/src/main/java/org/projectrainbow/commands/_CmdDiw.java |  5 +----
 rainbow/src/main/java/org/projectrainbow/launch/Bootstrap.java |  4 +---
 5 files changed, 10 insertions(+), 18 deletions(-)

diff --git a/PluginReference/src/main/java/PluginReference/RainbowUtils.java b/PluginReference/src/main/java/PluginReference/RainbowUtils.java
index 9063f89..795107a 100644
--- a/PluginReference/src/main/java/PluginReference/RainbowUtils.java
+++ b/PluginReference/src/main/java/PluginReference/RainbowUtils.java
@@ -328,10 +328,9 @@ public class RainbowUtils
 		  {
 			  String nextColor = ChatColor.YELLOW;
 			  StringBuilder sb = new StringBuilder();
-			  for(int i=0; i<strings.size(); i++)
-			  {
+			  for (String iterator : strings) {
 				  if(sb.length() > 0) sb.append(ChatColor.WHITE + ", ");
-				  sb.append(nextColor + strings.get(i));
+				  sb.append(nextColor + iterator);
 				  if(nextColor == ChatColor.GOLD) nextColor = ChatColor.YELLOW;
 				  else if(nextColor == ChatColor.YELLOW) nextColor = ChatColor.GREEN;
 				  else if(nextColor == ChatColor.GREEN) nextColor = ChatColor.AQUA;
diff --git a/rainbow/src/main/java/org/projectrainbow/_Janitor.java b/rainbow/src/main/java/org/projectrainbow/_Janitor.java
index 21785c4..fa47e71 100644
--- a/rainbow/src/main/java/org/projectrainbow/_Janitor.java
+++ b/rainbow/src/main/java/org/projectrainbow/_Janitor.java
@@ -24,9 +24,7 @@ public class _Janitor {
         int nRemoved = 0;
         WorldServer[] worlds = _DiwUtils.getMinecraftServer().worlds;
 
-        for (int i = 0; i < worlds.length; ++i) {
-            WorldServer world = worlds[i];
-
+        for (WorldServer world : worlds) {
             for (Entity ent : world.loadedEntityList) {
                 String entClassName = EntityList.getEntityString(ent);
                 String mobName = entClassName;
@@ -88,13 +86,13 @@ public class _Janitor {
 
                     boolean shouldRemove = false;
                     if (cleanTarget != null) {
-                        for (int idx = 0; idx < cleanTarget.length; ++idx) {
-                            if (cleanTarget[idx].equalsIgnoreCase(entClassName)) {
+                        for (String iterator : cleanTarget) {
+                            if (iterator.equalsIgnoreCase(entClassName)) {
                                 shouldRemove = true;
                                 break;
                             }
 
-                            if (cleanTarget[idx].equalsIgnoreCase(mobName) || cleanTarget[idx].equals("*") || mobName.startsWith("item.") && cleanTarget[idx].equalsIgnoreCase("item")) {
+                            if (iterator.equalsIgnoreCase(mobName) || iterator.equals("*") || mobName.startsWith("item.") && iterator.equalsIgnoreCase("item")) {
                                 shouldRemove = true;
                                 break;
                             }
diff --git a/rainbow/src/main/java/org/projectrainbow/_JoeCommandStats.java b/rainbow/src/main/java/org/projectrainbow/_JoeCommandStats.java
index f3f3a79..a759e06 100755
--- a/rainbow/src/main/java/org/projectrainbow/_JoeCommandStats.java
+++ b/rainbow/src/main/java/org/projectrainbow/_JoeCommandStats.java
@@ -59,8 +59,8 @@ public class _JoeCommandStats {
                     "buy", "ec", "bp", "worth"};
             String msgLower = msg.toLowerCase();
 
-            for (int doKick = 0; doKick < skips.length; ++doKick) {
-                if (msgLower.startsWith("/" + skips[doKick])) {
+            for (String iterator : skips) {
+                if (msgLower.startsWith("/" + iterator)) {
                     return null;
                 }
             }
diff --git a/rainbow/src/main/java/org/projectrainbow/commands/_CmdDiw.java b/rainbow/src/main/java/org/projectrainbow/commands/_CmdDiw.java
index 571784a..3de2b6b 100644
--- a/rainbow/src/main/java/org/projectrainbow/commands/_CmdDiw.java
+++ b/rainbow/src/main/java/org/projectrainbow/commands/_CmdDiw.java
@@ -116,8 +116,7 @@ public class _CmdDiw implements MC_Command {
         System.out.println("[Script] Executing File: " + fname);
         File file = new File(fname);
 
-        try {
-            BufferedReader br = new BufferedReader(new FileReader(file));
+        try (BufferedReader br = new BufferedReader(new FileReader(file))) {
             ICommandSender sender = _DiwUtils.getMinecraftServer();
             if (plr != null) {
                 sender = plr;
@@ -155,8 +154,6 @@ public class _CmdDiw implements MC_Command {
                     }
                 }
             }
-
-            br.close();
         } catch (Exception var16) {
             var16.printStackTrace();
         }
diff --git a/rainbow/src/main/java/org/projectrainbow/launch/Bootstrap.java b/rainbow/src/main/java/org/projectrainbow/launch/Bootstrap.java
index 0995bf8..a548674 100644
--- a/rainbow/src/main/java/org/projectrainbow/launch/Bootstrap.java
+++ b/rainbow/src/main/java/org/projectrainbow/launch/Bootstrap.java
@@ -41,8 +41,7 @@ public class Bootstrap {
         if (plugins_mod.exists() && plugins_mod.isDirectory()) {
             for (File file : plugins_mod.listFiles()) {
                 if (file.isFile() && file.getName().endsWith(".jar")) {
-                    try {
-                        JarFile jarFile = new JarFile(file);
+                    try (JarFile jarFile = new JarFile(file)) {
                         Manifest ex = jarFile.getManifest();
                         if (ex != null) {
                             Attributes var3 = ex.getMainAttributes();
@@ -55,7 +54,6 @@ public class Bootstrap {
                                 }
                             }
                         }
-                        jarFile.close();
                     } catch (Throwable th) {
                         logger.error("Failed to load tweaker file " + file, th);
                     }
-- 
2.13.0.windows.1

