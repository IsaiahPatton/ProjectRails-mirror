From db093c2e73fa16d810864a005315dd7f4b4728f5 Mon Sep 17 00:00:00 2001
From: IsaiahPatton <isaiahpatton1@gmail.com>
Date: Wed, 31 May 2017 00:46:45 -0400
Subject: [PATCH 13/14] Add ban api

---
 .../src/main/java/PluginReference/MC_Player.java          | 15 +++++++++++++++
 .../org/projectrainbow/mixins/MixinEntityPlayerMP.java    | 11 +++++++++++
 2 files changed, 26 insertions(+)

diff --git a/PluginReference/src/main/java/PluginReference/MC_Player.java b/PluginReference/src/main/java/PluginReference/MC_Player.java
index d1752cb..b2ccfff 100644
--- a/PluginReference/src/main/java/PluginReference/MC_Player.java
+++ b/PluginReference/src/main/java/PluginReference/MC_Player.java
@@ -532,5 +532,20 @@ public interface MC_Player extends MC_LivingEntity {
      * @param location the new home
      */
     void setHome2(MC_Location location);
+
+    // ProjectRails: start ban methods
+    /**
+     * Checks if player is banned from the server.
+     * 
+     * @return Is player banned.
+     */
+    boolean isBanned();
+    /**
+     * Bans the player.
+     * 
+     * @param ban - set the ban.
+     */
+    void setBanned(boolean ban);
+    // ProjectRails: end ban methods
 }
 
diff --git a/rainbow/src/main/java/org/projectrainbow/mixins/MixinEntityPlayerMP.java b/rainbow/src/main/java/org/projectrainbow/mixins/MixinEntityPlayerMP.java
index a0d2931..401794d 100644
--- a/rainbow/src/main/java/org/projectrainbow/mixins/MixinEntityPlayerMP.java
+++ b/rainbow/src/main/java/org/projectrainbow/mixins/MixinEntityPlayerMP.java
@@ -775,4 +775,15 @@ public abstract class MixinEntityPlayerMP extends MixinEntityPlayer implements I
                 location.dimension, location.yaw, location.pitch
         ));
     }
+
+    // ProjectRails: start ban methods
+    @Override
+    public boolean isBanned() {
+        return _DiwUtils.getMinecraftServer().getPlayerList().getBannedPlayers().isBanned(_DiwUtils.getMinecraftServer().getPlayerList().getPlayerByUUID(getUUID()).getGameProfile());
+    }
+    @Override
+    public void setBanned(boolean ban) {
+        _DiwUtils.getMinecraftServer().getPlayerList().getBannedPlayers().addEntry(new net.minecraft.server.management.UserListBansEntry(_DiwUtils.getMinecraftServer().getPlayerList().getPlayerByUUID(getUUID()).getGameProfile()));
+    }
+    // ProjectRails: end ban methods
 }
-- 
2.13.0.windows.1

